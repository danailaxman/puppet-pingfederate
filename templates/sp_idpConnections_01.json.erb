{
  "entityId": "<%= @a['entityID'] -%>",
  "name": "<%= @a['name'] -%>", 
  "active": true, 
  "contactInfo": {
    "firstName": "<%= @a['contact']['firstName'] -%>",
    "lastName": "<%= @a['contact']['lastName'] -%>",
    "email": "<%= @a['contact']['email'] -%>"
  }, 
  "type": "IDP",
  "idpBrowserSso": {
    "protocol": "SAML20", 
    "enabledProfiles": [
<% @a['profiles'].each_with_index do |val, i| -%>
    "<%= val -%>"<%= ',' if i < (@a['profiles'].size - 1) %>
<% end -%>
    ],
    "incomingBindings": [
      "REDIRECT", 
      "POST"
    ],
    "ssoServiceEndpoints": [
      {
        "url": "<%= @a['url'] -%>/<%= @a['post'] -%>", 
        "binding": "POST"
      }, 
      {
        "url": "<%= @a['url'] -%>/<%= @a['redirect'] -%>", 
        "binding": "REDIRECT"
      }
    ], 
    "idpIdentityMapping": "<%= @a['id_mapping'] -%>", 
    "attributeContract": {<%# list of attributes sent in the IdP assertion %>
      "coreAttributes": [
<% @a['core_attrs'].each_with_index do |val, i| -%>
        {
          "name": "<%= val -%>", 
          "masked": false
        }<%= ',' if i < (@a['core_attrs'].size - 1) %>
<% end -%>
      ], 
      "extendedAttributes": [
<% @a['extd_attrs'].each_with_index do |val, i| -%>
        {
          "name": "<%= val -%>", 
          "masked": false
        }<%= ',' if i < (@a['extd_attrs'].size - 1) %>
<% end -%>
      ]
    }, 
    "authenticationPolicyContractMappings": [
      {
        "authenticationPolicyContractRef": {
          "id": "